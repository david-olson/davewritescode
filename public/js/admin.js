!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=2)}([,,function(e,t,n){e.exports=n(3)},function(e,t){var n={selector:".editor",menubar:!1,statusbar:!1,mode:"inline",plugins:["lists","link","paste"],toolbar:[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic","underline","numlist","bullist","link"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]}],invalid_styles:"color font-size font-family background background-image"},a={selector:".simple-editor",menubar:!1,statusbar:!1,plugins:["link","paste"],toolbar:[{name:"formatting",items:["bold","italic","underline","link"]}],height:120,invalid_styles:"color font-size font-family background background-image",paste_enable_default_filters:!1,paste_filter_drop:!1,paste_preprocess:function(e,t){console.log(t.content);var n=t.content;n=n.replace(/<[^>]+>/g,""),t.content=n}};function o(){$(".select2-material").select2({theme:"material",minimumResultsForSearch:-1}),$(".select2-material-search").select2({theme:"material"}),$(".select2-tags").select2({theme:"foundation",tags:!0,placeholder:"Click here to start tagging"}),$(".editor").tinymce(n),$(".simple-editor").tinymce(a),$("[data-fancybox]").fancybox({buttons:["fullScreen","close"],animationEffect:"zoom",touch:!1,trapFocus:!1,beforeShow:function(){var e={},t=document.createElement("a");t.href=this.src;for(var n=t.search.substring(1).split("&"),a=0;a<n.length;a++){var o=n[a].split("=");e[o[0]]=decodeURIComponent(o[1])}var i="";e.table_target&&($("#media_gallery_table_"+e.table_target).find("input").each((function(e,t){console.log(t),i+=$(t).val()+","})),i=i.replace(/,+$/,""),this.src=this.src+"&selected="+i)},afterShow:function(){tinymce.editors.length>0&&tinymce.EditorManager.remove(),$(document).foundation(),tinymce.init(n),tinymce.init(a),$("[data-children] input").trigger("change"),o()},afterClose:function(){$(".dropzone").each((function(e,t){var n=$(this);n.data("max-files");dz_name="dropzone_"+n.data("field-name")+"_media_upload",Dropzone[dz_name]&&(Dropzone[dz_name].destroy(),delete Dropzone[dz_name])}))}}),$(".dropzone").each((function(e,t){var n=$(this),a=n.data("max-files");dz_name="dropzone_"+n.data("field-name")+"_media_upload",Dropzone[dz_name]&&Dropzone[dz_name].destroy(),Dropzone[dz_name]=new Dropzone(n[0],{maxFiles:a,success:function(e,t){$("#"+n.data("field-name")+"_upload_list").after(t.view),this.removeFile(e),this.options.maxFiles=this.options.maxFiles-1,0==this.options.maxFiles&&(this.disable(),document.querySelector("#"+n.data("field-name")+"_media_upload").classList.add("disabled"))},error:function(e){var t="";console.log(e),"error"==e.status&&(t+='<h2 class="errors">There was an error. One or more of your files could not be uploaded. Other files have been successfully uploaded, but if you do not see one of your files below, it may have not met requirements or exceeded max file limits.</h2>'),$("#"+n.data("field-name")+"_file_upload_errors").html(t),this.removeFile(e)}})})),$(".drag-and-drop").length>0&&$(".drag-and-drop").tableDnD({onDragClass:"is-active",onDrop:function(e,t){$(t).find(".editor").length>0&&($(t).find(".editor").each((function(e,t){$(t).tinymce().remove()})),$(t).find(".editor").tinymce(n)),$(t).find(".simple-editor").length>0&&($(t).find(".simple-editor").tinymce().remove(),$(t).find(".simple-editor").tinymce(a))}}),$(document).foundation()}function i(){var e="";$(".record-selection-checkbox:checked").each((function(){e+=","+$(this).val()})),e=e.replace(/(^,)|(,$)/g,""),$('input[name="selection"]').val(e),e.length>0?$(".bulk-actions-select").attr("disabled",!1):$(".bulk-actions-select").attr("disabled",!0)}function r(){if(!selectionSending){selectionSending=!0,$form=$("#selection_form");var e=$form.attr("action"),t=$form.attr("method"),n=$form.serialize();$.ajax({url:e,method:t,data:n}).done((function(e){selectionSending=!1,$("#selected_message").html(e.view),e.show?$("#selected_message").removeClass("hide"):($("#selected_message").addClass("hide"),$(".record-select-all-checkbox").prop("checked",!1).trigger("change"),$('input[name="selection"]').val("")),e.selection&&$('input[name="selection"]').val(e.selection)}))}}$(document).ready((function(){$(document).foundation(),$("body").on("dblclick",".media-name",(function(e){e.preventDefault();var t=$(this).data("rename-modal");$.fancybox.open({src:t,type:"ajax"})})),setTimeout((function(){$("[data-children]").find('input[type="radio"], input[type="checkbox"], select').trigger("change")}),1e3),$("body").on("submit",".add-media-form",(function(e){e.preventDefault();var t=$(this),n=t.attr("action"),a=t.attr("method"),i=t.serialize();$.ajax({url:n,method:a,data:i}).done((function(e){$("#media_gallery_table_"+e.table_target).html(e.view),$.fancybox.close(),o()}))})),$("body").on("submit",".media-item-rename-form",(function(e){e.preventDefault();var t=$(this),n=t.attr("action"),a=t.attr("method"),i=t.serialize();$.ajax({url:n,method:a,data:i,dataType:"json"}).done((function(e){$("#"+t.data("row-id")).replaceWith(e.view),$("#"+t.data("linked-id")).replaceWith(e.view),$.fancybox.close(),o()}))})),$("body").on("change","[data-children] input, [data-children] select",(function(e){var t=$(this).parents("[data-children]"),n=t.data("field-id");$('[data-parent="'+n+'"]').each((function(e,n){var a=$(n).data("parent-value");a=String(a);a=a.includes("|")?a.split("|"):[a];t.find('input[value="'+a+'"]');var o=t.find("select"),i=t.find("input:checked").map((function(){return $(this).val()})).get();if(a.includes(o.find("option:checked").val())){if($(n).addClass("parent-active"),void 0!==$(n).data("parent-required")){var r=$(n).data("child-id");getRequiredField(r)}}else if($(n).removeClass("parent-active"),void 0!==$(n).data("parent-required")){r=$(n).data("child-id");getNonRequiredField(r)}i.forEach((function(e){a.includes(e)?($(n).addClass("parent-active"),console.log(n)):$(n).removeClass("parent-active")}))}))})),$("body").on("submit",".name-media-form",(function(e){e.preventDefault();var t=$(this),n=t.attr("action"),a=t.attr("method"),o=t.serialize();$.ajax({url:n,method:a,data:o}).done((function(e){t.remove(),$("#"+t.data("table-target-id")).append(e.view)}))})),$("body").on("submit",".admin-filter-form",(function(e){e.preventDefault();var t=$(this);t.addClass("is-loading");var n=t.attr("action"),a=t.attr("method"),i=t.serialize();$.ajax({url:n,method:a,data:i}).done((function(e){$(".admin-filter-form-filters").html(e.filters),$(".admin-filter-form-table").html(e.results),$(".admin-filter-form-pagination").html(e.pagination),$(".admin-filter-form-pagination-info").html(e.paginationInfo),$(".admin-filter-form-thead").html(e.thead),$("#selected_message").addClass("hide"),$("#selected_message").html(e.selectionMessage),history.pushState(e.new_url,"",e.new_url),o()}))})),$("body").on("click","[data-clear]",(function(e){var t=$(this).data("clear"),n=document.querySelectorAll('input[name="'+t+'[]"]');console.log(n),n.forEach((function(e){e.checked=!1})),$(".admin-filter-form").submit()})),$("body").on("click","[data-orderby]",(function(e){e.preventDefault();var t=$(this).data("orderby"),n=$(this).data("order");$(".admin-filter-form-orderby").val(t),$(".admin-filter-form-order").val(n),$(".admin-filter-form").submit()})),$(".drag-and-drop-orderable").length>0&&$(".drag-and-drop-orderable").tableDnD({onDragClass:"is-active",dragHandle:".draggable-row",onDrop:function(e,t){$(e).find("tr").not(".head-row").each((function(e,t){$(t).find("input.resource-order").val(e)})),$(e).parents("form.orderable-form").submit()}}),checkboxesChanging=!1,$("body").on("change",".record-selection-checkbox",(function(e){var t=$(this);checkboxesChanging||(checkboxesChanging=!0,function(e){return new Promise((function(t,n){e.data("type");var a=$(".record-select-all-checkbox");1==e.prop("checked")?$(".record-selection-checkbox").not(":checked").length<1?(a.prop("indeterminate",!1),a.prop("checked",!0),r()):$(".record-selection-checkbox:checked").length>0?(a.prop("indeterminate",!0),a.prop("checked",!1),$("#selected_message").addClass("hide"),$('input[name="currently_selected"]').val("none")):(a.prop("indeterminate",!1),a.prop("checked",!1)):$(".record-selection-checkbox:checked").length>0?(a.prop("indeterminate",!0),$("#selected_message").addClass("hide"),$('input[name="currently_selected"]').val("none"),a.prop("checked",!1)):(a.prop("indeterminate",!1),a.prop("checked",!1)),i(),t()}))}(t).then((function(){checkboxesChanging=!1})))})),$("body").on("change",".record-select-all-checkbox",(function(e){var t=$(this);t.data("type");checkboxesChanging||(checkboxesChanging=!0,function(e){return new Promise((function(t,n){1==e.prop("checked")?($(".record-selection-checkbox").prop("checked",!0),i(),r()):(e.prop("indeterminate",!1),$(".record-selection-checkbox").prop("checked",!1),$("#selected_message").addClass("hide"),$('input[name="currently_selected"]').val("none"),i()),t()}))}(t).then((function(){checkboxesChanging=!1})))})),$("body").on("submit","#selection_form",(function(e){e.preventDefault(),r()})),$("body").on("click",".status-update-submit",(function(e){e.preventDefault();var t=$(this).parents(".record-row");t.addClass("is-loading");var n=t.find(".status-update-form"),a=n.attr("action"),i=n.attr("method"),r=n.serialize();$.ajax({url:a,data:r,method:i,dataType:"JSON"}).done((function(e){t.replaceWith(e.view),o()}))})),$("body").on("change",".color-picker-radio",(function(){$(".dropdown-pane").foundation("close");var e=$(this).val();$(".color-picker").removeClass((function(e,t){return(t.match(/(^|\s)color-picker--\S+/g)||[]).join(" ")})),$(".color-picker").addClass("color-picker--"+e)})),$("body").on("submit",".orderable-form",(function(e){e.preventDefault();var t=$(this),n=t.attr("action"),a=t.attr("method"),o=t.serialize();$.ajax({url:n,data:o,method:a,dataType:"JSON"}).done((function(e){console.log(e)}))})),$(".message").length>0&&setTimeout((function(){$(".message").fadeOut(250)}),12e3),$("body").on("click",".add-something-button",(function(){var e=$(this).data("add"),t=$(".add-"+e+"-form"),n=t.attr("action"),a=t.attr("method"),i=t.serialize();$.ajax({url:n,method:a,data:i}).done((function(n){$("#"+e+"_tbody").append(n.view),n.modals&&$("."+e+"-upload-modal-area").append(n.modals);var a=t.find('input[name="count"]');a.val(parseInt(a.val())+1),o()}))})),o(),$("body").on("change",".section-title-input",(function(e){var t=$(this),n=$("#"+t.data("title-text"));t.val().length>0?n.html(t.val()):n.html("Untitled Section")})),$("body").on("click",".remove-section",(function(e){e.preventDefault();var t=$(this).data("section-count");$("#section_row_"+t).remove(),$("#section_media_"+t).remove()})),$("body").on("click",".remove-row",(function(e){e.preventDefault();var t=$(this).data("row-id");$("#"+t).remove()})),$("body").on("click",".done-editing-button",(function(){$.fancybox.close()}))})),selectionSending=!1}]);